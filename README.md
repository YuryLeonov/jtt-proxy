# jtt-proxy
Проект, который служит для обработки событий с регистратора платформы MTP и их преобразования по протоколам JT/T 808, 1078 и JSATL.  
808 - протокол для передачи телеметрии.  
1078 - протокол для передачи видео.  
JSATL - протокол, служащий для выгрузки медиафайлов.  
Ознакомиться с ними можно в докумертах в папке doc.  

# Требования  
Операционная система - ubuntu 20/22  
Версия C++ - не ниже 17  
Версия g++ - 11.4.0  
Версия cmake - не ниже  3.5  

# Зависимости
Для сборки проекта требуются библиотеки ffmpeg и websocketpp. Установить их можно командами:  
sudo apt install libavcodec-dev  
sudo apt install libavutil-dev  
sudo apt install libavformat-dev 
sudo apt install libboost-all-dev  
sudo apt install libwebsocketpp-dev  

# Сборка
1) Склонировать данный репозиторий, ветка main.  
2) В директории проекта создать папку build(или любое другое название).  
3) Выполняем cmake ../  
4) Собираем: make -j 2  
5) Далее в папке сборки появится исполняемый файл проекта  

# Запуск
Для запуска нужно выполнить команду:  
./jtt-proxy абсолютный_путь_к_конфигу.
Чтобы посмотреть версию программы можно использовать ключик v  

# Конфигурационный файл
Пример конфигурационного файла можно посмотреть в папке config.  
В нем описаны основные объекты:  
terminal - параметры терминала(регистратора)  
eventsServer - параметры клиента БД, через котрого идет взаимодействие с базой данных  
platform - параметры платформы, на которую шлется информация (алармы, видео)  
statusFlag - временные параметры статуса ТС(дальше будет браться из базы)
